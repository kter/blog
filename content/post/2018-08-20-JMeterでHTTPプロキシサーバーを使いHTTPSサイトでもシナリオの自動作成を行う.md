---
author: kter
categories:
- JMeter
date: "2018-08-20T10:46:02Z"
id: 594
image: null
tags:
- JMeter
- 負荷テスト
title: JMeterでHTTPプロキシサーバーを使いHTTPSサイトでもシナリオの自動作成を行う
---

JMeterにはプロキシを使ったシナリオの自動作成機能があります。

プロキシの使い方を紹介しているサイトによってはHTTPSはJMeter単体ではできないと書いてあるのですが、単体でできたので手順をメモします。

## 手順

### 1. 記録するHTTPSリクエストを置く空のスレッドグループを作成

![]({{site.baseurl}}/assets/img/20180820/2018-08-20-01.png)

### 2. 記録用のプロキシサーバを作成

![]({{site.baseurl}}/assets/img/20180820/2018-08-20-02.png)

### 3. プロキシサーバの設定

"対象となるコントローラ"に、先の手順で作成したスレッドグループを指定します。

その後"開始"ボタンを押下します。

![]({{site.baseurl}}/assets/img/20180820/2018-08-20-03.png)

プロキシ用のダミー証明書についての説明が書かれています。OKボタンを押下します。

![]({{site.baseurl}}/assets/img/20180820/2018-08-20-04.png)

### 4. ダミー証明書をインストール

JMeterのbinディレクトリ内に生成されたApacheJMeterTemporaryRootCA.crtファイルをダブルクリックで開きます。

![]({{site.baseurl}}/assets/img/20180820/2018-08-20-05.png)

キーチェーンが開きますので、選択されている```_ DO NOT INSTALL```で始まる証明書ファイルを右クリックして"情報を見る"を押下します。

![]({{site.baseurl}}/assets/img/20180820/2018-08-20-06.png)

### 5. 証明書を信頼

開いたウインドウの"信頼"タブの"この証明書を使用する時"のプルダウンで"常に信頼"を選択します。

![]({{site.baseurl}}/assets/img/20180820/2018-08-20-07.png)

ウインドウを閉じるときにパスワードが求められるので入力します。

![]({{site.baseurl}}/assets/img/20180820/2018-08-20-08.png)

### 6. プロキシ設定

システム環境設定のネットワークを押下します。

![]({{site.baseurl}}/assets/img/20180820/2018-08-20-09.png)

詳細ボタンを押下します。

![]({{site.baseurl}}/assets/img/20180820/2018-08-20-10.png)

"プロキシ"タブを開き、"保護されたWebプロキシ (HTTPS)"を選択し、"保護されたWebプロキシサーバ"に```localhost```を入力し、OKを押下する。


![]({{site.baseurl}}/assets/img/20180820/2018-08-20-11.png)

### 7. プロキシを通じてページにアクセスする

プロキシの設定ができたのでWebページにアクセスします。

するとスレッドグループの配下にHTTPリクエストが追加されます。

![]({{site.baseurl}}/assets/img/20180820/2018-08-20-12.png)

### 8. 最後に

プロキシの利用が終わったら環境設定の"保護されたWebプロキシ (HTTPS)"のチェックを外します。


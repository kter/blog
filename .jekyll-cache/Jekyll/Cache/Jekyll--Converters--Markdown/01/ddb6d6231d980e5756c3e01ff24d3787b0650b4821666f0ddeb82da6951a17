I"<p>JMeterにはプロキシを使ったシナリオの自動作成機能があります。</p>

<p>プロキシの使い方を紹介しているサイトによってはHTTPSはJMeter単体ではできないと書いてあるのですが、単体でできたので手順をメモします。</p>

<h2 id="手順">手順</h2>

<h3 id="1-記録するhttpsリクエストを置く空のスレッドグループを作成">1. 記録するHTTPSリクエストを置く空のスレッドグループを作成</h3>

<p><img src="/assets/img/20180820/2018-08-20-01.png" alt="" /></p>

<h3 id="2-記録用のプロキシサーバを作成">2. 記録用のプロキシサーバを作成</h3>

<p><img src="/assets/img/20180820/2018-08-20-02.png" alt="" /></p>

<h3 id="3-プロキシサーバの設定">3. プロキシサーバの設定</h3>

<p>“対象となるコントローラ”に、先の手順で作成したスレッドグループを指定します。</p>

<p>その後”開始”ボタンを押下します。</p>

<p><img src="/assets/img/20180820/2018-08-20-03.png" alt="" /></p>

<p>プロキシ用のダミー証明書についての説明が書かれています。OKボタンを押下します。</p>

<p><img src="/assets/img/20180820/2018-08-20-04.png" alt="" /></p>

<h3 id="4-ダミー証明書をインストール">4. ダミー証明書をインストール</h3>

<p>JMeterのbinディレクトリ内に生成されたApacheJMeterTemporaryRootCA.crtファイルをダブルクリックで開きます。</p>

<p><img src="/assets/img/20180820/2018-08-20-05.png" alt="" /></p>

<p>キーチェーンが開きますので、選択されている<code class="highlighter-rouge">_ DO NOT INSTALL</code>で始まる証明書ファイルを右クリックして”情報を見る”を押下します。</p>

<p><img src="/assets/img/20180820/2018-08-20-06.png" alt="" /></p>

<h3 id="5-証明書を信頼">5. 証明書を信頼</h3>

<p>開いたウインドウの”信頼”タブの”この証明書を使用する時”のプルダウンで”常に信頼”を選択します。</p>

<p><img src="/assets/img/20180820/2018-08-20-07.png" alt="" /></p>

<p>ウインドウを閉じるときにパスワードが求められるので入力します。</p>

<p><img src="/assets/img/20180820/2018-08-20-08.png" alt="" /></p>

<h3 id="6-プロキシ設定">6. プロキシ設定</h3>

<p>システム環境設定のネットワークを押下します。</p>

<p><img src="/assets/img/20180820/2018-08-20-09.png" alt="" /></p>

<p>詳細ボタンを押下します。</p>

<p><img src="/assets/img/20180820/2018-08-20-10.png" alt="" /></p>

<p>“プロキシ”タブを開き、”保護されたWebプロキシ (HTTPS)”を選択し、”保護されたWebプロキシサーバ”に<code class="highlighter-rouge">localhost</code>を入力し、OKを押下する。</p>

<p><img src="/assets/img/20180820/2018-08-20-11.png" alt="" /></p>

<h3 id="7-プロキシを通じてページにアクセスする">7. プロキシを通じてページにアクセスする</h3>

<p>プロキシの設定ができたのでWebページにアクセスします。</p>

<p>するとスレッドグループの配下にHTTPリクエストが追加されます。</p>

<p><img src="/assets/img/20180820/2018-08-20-12.png" alt="" /></p>

<h3 id="8-最後に">8. 最後に</h3>

<p>プロキシの利用が終わったら環境設定の”保護されたWebプロキシ (HTTPS)”のチェックを外します。</p>

:ET
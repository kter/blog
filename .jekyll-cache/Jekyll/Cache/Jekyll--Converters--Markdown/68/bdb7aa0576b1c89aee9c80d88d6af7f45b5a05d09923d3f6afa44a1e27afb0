I"
<h1 id="ã¾ã¨ã‚">ã¾ã¨ã‚</h1>

<p>GlacierçŠ¶æ…‹ã®S3ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å–ã‚Šå‡ºã™éš›ã«ã¯ã€ãƒªã‚¹ãƒˆã‚¢æœŸé–“ã‚’æŒ‡å®šã—ãŸä¸Šã§restore-objectã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>

<h1 id="æ‰‹é †">æ‰‹é †</h1>

<h2 id="ãƒªã‚¹ãƒˆã‚¢">ãƒªã‚¹ãƒˆã‚¢</h2>
<p>recursiveã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒç„¡ã„ãŸã‚ã€list-objectsã—ã¦ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¹ã‚’å–å¾—ã—ã¦ã‹ã‚‰restore-objectã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">for </span>key <span class="k">in</span> <span class="sb">`</span>aws s3api list-objects <span class="nt">--bucket</span> <span class="o">(</span>ãƒã‚±ãƒƒãƒˆå<span class="o">)</span> <span class="nt">--prefix</span> <span class="o">(</span>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå<span class="o">)</span> <span class="nt">--output</span> json | jq <span class="nt">-r</span> <span class="s1">'.Contents[].Key'</span><span class="sb">`</span><span class="p">;</span> <span class="k">do </span><span class="nb">echo</span> <span class="nv">$key</span><span class="p">;</span> aws s3api restore-object <span class="nt">--bucket</span> <span class="o">(</span>ãƒã‚±ãƒƒãƒˆå<span class="o">)</span> <span class="nt">--key</span> <span class="nv">$key</span> <span class="nt">--restore-request</span> <span class="s1">'{"Days": 3}'</span><span class="p">;</span><span class="k">done</span>
</code></pre></div></div>

<h2 id="ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰">ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</h2>

<p>ãƒªã‚¹ãƒˆã‚¢æ¸ˆã¿ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¨ãã‚‚resursiveãŒä½¿ãˆãªã„ãŸã‚ã€list-objectsã—ã¦ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¹ã‚’å–å¾—ã—ã¦ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">for </span>key <span class="k">in</span> <span class="sb">`</span>aws s3api list-objects <span class="nt">--bucket</span> <span class="o">(</span>ãƒã‚±ãƒƒãƒˆå<span class="o">)</span> <span class="nt">--prefix</span> <span class="o">(</span>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå<span class="o">)</span> <span class="nt">--output</span> json | jq <span class="nt">-r</span> <span class="s1">'.Contents[].Key'</span><span class="sb">`</span><span class="p">;</span> <span class="k">do </span><span class="nb">echo</span> <span class="nv">$key</span><span class="p">;</span> aws s3 <span class="nb">cp </span>s3://<span class="o">(</span>ãƒã‚±ãƒƒãƒˆå<span class="o">)</span>/<span class="nv">$key</span> .<span class="p">;</span><span class="k">done</span>
</code></pre></div></div>

:ET